# ğŸ³ Code Corpses Docker Image
# ä¸€è¡Œå‘½ä»¤ï¼Œåœ¨ä»»ä½•åœ°æ–¹è¿è¡Œå¢“åœ°

FROM node:18-alpine

LABEL maintainer="Zhifeng-Niu"
LABEL description="ğŸª¦ ä»£ç å°¸ä½“é›†ä¸­è¥ - AIæ—¶ä»£çš„ä»£ç è½®å›ä¸­è½¬ç«™"

WORKDIR /app

# å®‰è£… code-corpses
RUN npm install -g code-corpses

# åˆ›å»ºåˆ«å
RUN ln -s /usr/local/lib/node_modules/code-corpses/dist/index.js /usr/local/bin/cemetery

WORKDIR /workspace

# é»˜è®¤å‘½ä»¤
CMD ["cemetery", "--visit"]

# æ„å»ºå‘½ä»¤
# docker build -t code-corpses .
# 
# ä½¿ç”¨æ–¹å¼ï¼š
# docker run --rm -it code-corpses --visit
# docker run --rm -it code-corpses --stats
# docker run --rm -it code-corpses --help
#
# æŒ‚è½½è‡ªå®šä¹‰é…ç½®ï¼š
# docker run --rm -v $(pwd)/cemetery.config.yaml:/app/cemetery.config.yaml code-corpses --scan
